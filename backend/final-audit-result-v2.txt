node.exe : (node:29176) [MONGOOSE] Warning: Duplicate schema index on {"reviewToken":1} found. 
This is often due to declaring an index using both "index: true" and "schema.index()". Please 
remove the duplicate index definition.
En línea: 1 Carácter: 1
+ & "C:\Program Files\nodejs/node.exe" "C:\Program Files\nodejs/node_mo ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: ((node:29176) [M...dex definition.:String) [], Rem 
   oteException
    + FullyQualifiedErrorId : NativeCommandError
 
(Use `node --trace-warnings ...` to show where the warning was created)
(node:29176) [MONGOOSE] Warning: Duplicate schema index on {"numeroPedido":1} found. This is 
often due to declaring an index using both "index: true" and "schema.index()". Please remove 
the duplicate index definition.
(node:29176) [MONGOOSE] Warning: Duplicate schema index on {"expiraEn":1} found. This is often 
due to declaring an index using both "index: true" and "schema.index()". Please remove the 
duplicate index definition.
(node:29176) [MONGOOSE] Warning: Duplicate schema index on {"reviewToken":1} found. This is 
often due to declaring an index using both "index: true" and "schema.index()". Please remove 
the duplicate index definition.
[0mPOST /api/public/barberias/barberia-test/resenas?reviewToken=b415917417549225b373b42946e48c6d2561c4c216a43ff8a096551a2726aa6f [32m201[0m 14.255 ms - 646[0m
[0mPOST /api/public/barberias/barberia-test/resenas [33m404[0m 3.258 ms - 51[0m
[0mPOST /api/public/barberia-test/resenas?reviewToken=invalid-token [33m404[0m 2.124 ms - 172[0m
[0mPOST /api/public/barberias/barberia-test/resenas?reviewToken=e610010d1703e0c7934c540621d5fbd7484259f9e67ade65b0656adaa54d625b [32m201[0m 5.384 ms - 611[0m
[0mPOST /api/public/barberia-test/resenas?reviewToken=e610010d1703e0c7934c540621d5fbd7484259f9e67ade65b0656adaa54d625b [33m404[0m 0.507 ms - 172[0m
[0mPOST /api/public/barberia-test/resenas?reviewToken=c1bc79d64f55f8796f9f5ced5439da23e164a6d4fc7d91be994bd29f20102cb7 [33m404[0m 0.212 ms - 172[0m
[0mGET /api/public/barberias/barberia-test/resenas/validar-token?reviewToken=3d9e0358ec4898744859520aaf0788474c07023f34c609b54bec76aa1b16cfda [32m200[0m 10.528 ms - 158[0m
[0mGET /api/public/barberia-test/resenas/validar-token?reviewToken=invalid [33m404[0m 0.604 ms - 185[0m
[0mGET /api/public/barberias/barberia-test/resenas [32m200[0m 7.640 ms - 864[0m
[0mGET /api/public/barberias/barberia-test/resenas [32m200[0m 6.205 ms - 864[0m
[0mGET /api/admin/resenas/pendientes [32m200[0m 5.715 ms - 424[0m
[0mGET /api/admin/resenas/pendientes [33m401[0m 0.190 ms - 27[0m
[0mPATCH /api/admin/resenas/698a95ccdc134a655b6ff67e/aprobar [32m200[0m 5.739 ms - 448[0m
[0mPATCH /api/admin/resenas/698a95ccdc134a655b6ff692/aprobar [33m401[0m 0.206 ms - 27[0m
[0mGET /api/admin/resenas/estadisticas [32m200[0m 4.076 ms - 141[0m
FAIL tests/resenas.test.js (5.561 s)
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (13) from .env -- tip: ƒöä add secrets lifecycle 
management: https://dotenvx.com/ops

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      ƒôí [POST] /api/public/barberias/barberia-test/resenas?reviewToken=b415917417549225b373b4
2946e48c6d2561c4c216a43ff8a096551a2726aa6f

      at log (src/app.js:98:11)

    console.log
      ­ƒôí [POST] /api/public/barberias/barberia-test/resenas

      at log (src/app.js:98:11)

    console.log
      ­ƒôí [POST] /api/public/barberia-test/resenas?reviewToken=invalid-token

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/barberia-test/resenas?reviewToken=e610010d1703e0c7934c54
0621d5fbd7484259f9e67ade65b0656adaa54d625b

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberia-test/resenas?reviewToken=e610010d1703e0c7934c540621d5fbd7
484259f9e67ade65b0656adaa54d625b

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberia-test/resenas?reviewToken=c1bc79d64f55f8796f9f5ced5439da23
e164a6d4fc7d91be994bd29f20102cb7

      at log (src/app.js:98:11)

    console.log
      ƒôí [GET] /api/public/barberias/barberia-test/resenas/validar-token?reviewToken=3d9e0358e
c4898744859520aaf0788474c07023f34c609b54bec76aa1b16cfda

      at log (src/app.js:98:11)

    console.log
      ­ƒôí [GET] /api/public/barberia-test/resenas/validar-token?reviewToken=invalid

      at log (src/app.js:98:11)

    console.log
      ­ƒôí [GET] /api/public/barberias/barberia-test/resenas

      at log (src/app.js:98:11)

    console.log
      ­ƒôí [GET] /api/public/barberias/barberia-test/resenas

      at log (src/app.js:98:11)

    console.log
      ­ƒôí [GET] /api/admin/resenas/pendientes

      at log (src/app.js:98:11)

    console.log
      ­ƒôí [GET] /api/admin/resenas/pendientes

      at log (src/app.js:98:11)

    console.log
      ­ƒôí [PATCH] /api/admin/resenas/698a95ccdc134a655b6ff67e/aprobar

      at log (src/app.js:98:11)

    console.log
      ­ƒôí [PATCH] /api/admin/resenas/698a95ccdc134a655b6ff692/aprobar

      at log (src/app.js:98:11)

    console.log
      ­ƒôí [GET] /api/admin/resenas/estadisticas

      at log (src/app.js:98:11)

    console.log
      ­ƒôí [GET] /api/public/barberias/barberia-2/resenas

      at log (src/app.js:98:11)

    console.log
      ­ƒôí [GET] /api/public/barberia-2/resenas

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å MongoDB desconectado

    [0m [90m 89 |[39m   
mongoose[33m.[39mconnection[33m.[39mon([32m'disconnected'[39m[33m,[39m () [33m=>[39m 
{
     [90m 90 |[39m     isConnected [33m=[39m [36mfalse[39m[33m;[39m
    [31m[1m>[22m[39m[90m 91 |[39m     console[33m.[39mwarn([32m'ÔÜá´©Å MongoDB 
desconectado'[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 92 |[39m   })[33m;[39m
     [90m 93 |[39m
     [90m 94 |[39m   mongoose[33m.[39mconnection[33m.[39mon([32m'error'[39m[33m,[39m 
(err) [33m=>[39m {[0m

      at NativeConnection.warn (src/config/db.js:91:13)
      at NativeConnection.set (node_modules/mongoose/lib/connection.js:149:12)
      at NativeConnection.onClose (node_modules/mongoose/lib/connection.js:1319:19)
      at NativeConnection._close (node_modules/mongoose/lib/connection.js:1268:12)
      at closeDB (tests/setup.js:33:5)
      at Object.<anonymous> (tests/resenas.test.js:28:9)

  ÔùÅ Sistema de Rese├▒as - Tests ÔÇ║ POST /api/public/:slug/resenas - Crear Rese├▒a ÔÇ║ Debe 
rechazar rese├▒a con token inv├ílido

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

    [0m [90m 136 |[39m
     [90m 137 |[39m             
expect(response[33m.[39mstatus)[33m.[39mtoBe([35m404[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 138 |[39m             
expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m     |[39m                                           [31m[1m^[22m[39m
     [90m 139 |[39m         })[33m;[39m
     [90m 140 |[39m
     [90m 141 |[39m         test([32m'Debe rechazar rese├▒a duplicada'[39m[33m,[39m 
[36masync[39m () [33m=>[39m {[0m

      at Object.toBe (tests/resenas.test.js:138:43)

  ÔùÅ Sistema de Rese├▒as - Tests ÔÇ║ POST /api/public/:slug/resenas - Crear Rese├▒a ÔÇ║ Debe 
rechazar rese├▒a duplicada

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 404

    [0m [90m 157 |[39m                 })[33m;[39m
     [90m 158 |[39m
    [31m[1m>[22m[39m[90m 159 |[39m             
expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 160 |[39m             
expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 161 |[39m         })[33m;[39m
     [90m 162 |[39m[0m

      at Object.toBe (tests/resenas.test.js:159:37)

  ÔùÅ Sistema de Rese├▒as - Tests ÔÇ║ POST /api/public/:slug/resenas - Crear Rese├▒a ÔÇ║ Debe 
rechazar rese├▒a sin calificaci├│n general

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 404

    [0m [90m 168 |[39m                 })[33m;[39m
     [90m 169 |[39m
    [31m[1m>[22m[39m[90m 170 |[39m             
expect(response[33m.[39mstatus)[33m.[39mtoBe([35m500[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 171 |[39m             
expect(response[33m.[39mbody[33m.[39msuccess)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m 172 |[39m         })[33m;[39m
     [90m 173 |[39m     })[33m;[39m[0m

      at Object.toBe (tests/resenas.test.js:170:37)

  ÔùÅ Sistema de Rese├▒as - Tests ÔÇ║ GET /api/public/:slug/resenas/validar-token - Validar 
Token ÔÇ║ Debe rechazar token inv├ílido

    expect(received).toBe(expected) // Object.is equality

    Expected: false
    Received: undefined

    [0m [90m 187 |[39m
     [90m 188 |[39m             
expect(response[33m.[39mstatus)[33m.[39mtoBe([35m404[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 189 |[39m             
expect(response[33m.[39mbody[33m.[39mvalido)[33m.[39mtoBe([36mfalse[39m)[33m;[39m
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 190 |[39m         })[33m;[39m
     [90m 191 |[39m     })[33m;[39m
     [90m 192 |[39m[0m

      at Object.toBe (tests/resenas.test.js:189:42)

  ÔùÅ Sistema de Rese├▒as - Tests ÔÇ║ Multitenancy - Aislamiento de Datos ÔÇ║ Barber├¡a 1 solo 
debe ver sus propias rese├▒as

    expect(received).toBe(expected) // Object.is equality

    Expected: "698a95cddc134a655b6ff6b2"
    Received: "698a95cddc134a655b6ff6bc"

    [0m [90m 422 |[39m             
expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m 423 |[39m             expect(response[33m.[39mbody[33m.[39mdata[33m.[39mresen
as[33m.[39mlength)[33m.[39mtoBe([35m1[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 424 |[39m             expect(response[33m.[39mbody[33m.[39md
ata[33m.[39mresenas[[35m0[39m][33m.[39mbarberiaId[33m.[39mtoString())[33m.[39mtoBe(ba
rberia[33m.[39m_id[33m.[39mtoString())[33m;[39m
     [90m     |[39m                                                                         
[31m[1m^[22m[39m
     [90m 425 |[39m         })[33m;[39m
     [90m 426 |[39m
     [90m 427 |[39m         test([32m'Barber├¡a 2 solo debe ver sus propias 
rese├▒as'[39m[33m,[39m [36masync[39m () [33m=>[39m {[0m

      at Object.toBe (tests/resenas.test.js:424:73)

  ÔùÅ Sistema de Rese├▒as - Tests ÔÇ║ Multitenancy - Aislamiento de Datos ÔÇ║ Barber├¡a 2 solo 
debe ver sus propias rese├▒as

    expect(received).toBe(expected) // Object.is equality

    Expected: 200
    Received: 404

    [0m [90m 429 |[39m                 
[33m.[39m[36mget[39m([32m`/api/public/${barberia2.slug}/resenas`[39m)[33m;[39m
     [90m 430 |[39m
    [31m[1m>[22m[39m[90m 431 |[39m             
expect(response[33m.[39mstatus)[33m.[39mtoBe([35m200[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 432 |[39m             expect(response[33m.[39mbody[33m.[39mdata[33m.[39mresen
as[33m.[39mlength)[33m.[39mtoBe([35m1[39m)[33m;[39m
     [90m 433 |[39m             expect(response[33m.[39mbody[33m.[39mdata[33m.[39mresen
as[[35m0[39m][33m.[39mbarberiaId[33m.[39mtoString())[33m.[39mtoBe(barberia2[33m.[39m_
id[33m.[39mtoString())[33m;[39m
     [90m 434 |[39m         })[33m;[39m[0m

      at Object.toBe (tests/resenas.test.js:431:37)

(node:29176) [MONGOOSE] Warning: Duplicate schema index on {"reviewToken":1} found. This is 
often due to declaring an index using both "index: true" and "schema.index()". Please remove 
the duplicate index definition.
(node:29176) [MONGOOSE] Warning: Duplicate schema index on {"numeroPedido":1} found. This is 
often due to declaring an index using both "index: true" and "schema.index()". Please remove 
the duplicate index definition.
(node:29176) [MONGOOSE] Warning: Duplicate schema index on {"expiraEn":1} found. This is often 
due to declaring an index using both "index: true" and "schema.index()". Please remove the 
duplicate index definition.
(node:29176) [MONGOOSE] Warning: Duplicate schema index on {"reviewToken":1} found. This is 
often due to declaring an index using both "index: true" and "schema.index()". Please remove 
the duplicate index definition.
[0mGET /api/public/barberias/barberia-2/resenas [32m200[0m 5.337 ms - 474[0m
[0mGET /api/public/barberia-2/resenas [33m404[0m 0.296 ms - 168[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar [31m500[0m 84.418 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar [31m500[0m 82.815 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar [31m500[0m 82.123 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar [31m500[0m 81.367 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar [31m500[0m 80.835 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar [31m500[0m 84.814 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar [31m500[0m 84.077 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar [31m500[0m 83.310 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar [31m500[0m 82.578 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar [31m500[0m 81.709 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 1.409 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.385 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.360 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.338 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.348 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.431 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.380 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.365 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.393 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.348 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.341 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.337 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.506 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.352 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.356 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.428 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.369 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.343 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.347 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.332 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.329 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.325 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.327 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.357 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.360 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.355 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.327 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.481 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.448 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [33m429[0m 0.329 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 150.572 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 149.393 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 148.319 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 147.551 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 158.518 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 158.010 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 157.437 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 156.810 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 153.498 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 152.369 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 151.513 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 150.827 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 150.254 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 149.752 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 154.201 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 153.846 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 153.365 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 152.923 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 152.445 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar [31m500[0m 151.969 ms - 827[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c40701e0/reservar [33m429[0m 0.438 ms - 61[0m
FAIL tests/race-condition-stress.test.js
  ÔùÅ Console

    console.log
      [dotenv@17.2.3] injecting env (13) from .env -- tip: ÔÜÖ´©Å  specify custom .env file 
path with { path: '/custom/path/.env' }

      at _log (node_modules/dotenv/lib/main.js:142:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95cd49b93d39c40700ca/reservar

      at log (src/app.js:98:11)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:57.986Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:57.987Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:57.988Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:57.989Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:57.992Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:57.998Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:57.999Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:57.999Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.000Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.001Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.log
      Ô£à Exitosos: 0

      at Object.log (tests/race-condition-stress.test.js:84:21)

    console.log
      ÔØî Fallidos: 10

      at Object.log (tests/race-condition-stress.test.js:85:21)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c407011a/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c407011a/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Started: CreateReservation (attempt 1/3)

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:54:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.213Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.213Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.214Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.215Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.219Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.219Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.220Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.222Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.223Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.224Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.225Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.225Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.226Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.227Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.log
      [Transaction] Aborted: CreateReservation

      at Function.log [as executeInTransaction] (src/utils/TransactionManager.js:69:29)

    console.error
      [Transaction] Failed: CreateReservation {
        error: 'Transaction numbers are only allowed on a replica set member or mongos',
        attempt: 1,
        stack: 'MongoServerError: Transaction numbers are only allowed on a replica set member 
or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 80 |[39m
     [90m 81 |[39m                 [90m// Non-transient error or max retries reached[39m
    [31m[1m>[22m[39m[90m 82 |[39m                 
console[33m.[39merror([32m`[Transaction] Failed: ${operationName}`[39m[33m,[39m {
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 83 |[39m                     error[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 84 |[39m                     attempt[33m:[39m attempt [33m+[39m 
[35m1[39m[33m,[39m
     [90m 85 |[39m                     stack[33m:[39m error[33m.[39mstack[0m

      at Function.error [as executeInTransaction] (src/utils/TransactionManager.js:82:25)
      at CreateReserva.execute (src/application/use-cases/reservas/CreateReserva.js:26:34)
      at Object.<anonymous>.exports.crearReservaBySlug 
(src/controllers/public.controller.js:140:25)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.236Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.237Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.237Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.238Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.239Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.error
      ƒö┤ ERROR: TransactionError: Transaction failed for CreateReservation: Transaction 
numbers are only allowed on a replica set member or mongos
          at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:88:42)
          at processTicksAndRejections (node:internal/process/task_queues:105:5)
          at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applicati
on\use-cases\reservas\CreateReserva.js:26:34)
          at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
        isTransactionError: true,
        originalError: MongoServerError: Transaction numbers are only allowed on a replica set 
member or mongos
            at Connection.sendCommand (C:\Users\Kristian\Desktop\barber-saas\backend\node_modul
es\mongodb\src\cmap\connection.ts:557:17)
            at processTicksAndRejections (node:internal/process/task_queues:105:5)
            at Connection.command (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\m
ongodb\src\cmap\connection.ts:627:22)
            at Server.command 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\sdam\server.ts:350:21)
            at tryOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb
\src\operations\execute_operation.ts:293:24)
            at executeOperation (C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mon
godb\src\operations\execute_operation.ts:123:12)
            at Collection.insertOne 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongodb\src\collection.ts:294:12)
            at model.$__save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:398:16)
            at model.save 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:609:5)
            at 
C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2722:9
            at async Promise.all (index 0)
            at Function.create 
(C:\Users\Kristian\Desktop\barber-saas\backend\node_modules\mongoose\lib\model.js:2707:11)
            at MongoReservaRepository.save (C:\Users\Kristian\Desktop\barber-saas\backend\src\i
nfrastructure\database\mongodb\repositories\MongoReservaRepository.js:15:16)
            at TransactionManager.executeInTransaction.operationName (C:\Users\Kristian\Desktop
\barber-saas\backend\src\application\use-cases\reservas\CreateReserva.js:72:42)
            at Function.executeInTransaction 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\utils\TransactionManager.js:57:32)
            at CreateReserva.execute (C:\Users\Kristian\Desktop\barber-saas\backend\src\applica
tion\use-cases\reservas\CreateReserva.js:26:34)
            at Object.<anonymous>.exports.crearReservaBySlug 
(C:\Users\Kristian\Desktop\barber-saas\backend\src\controllers\public.controller.js:140:25) {
          errorLabelSet: Set(0) {},
          errorResponse: {
            ok: 0,
            errmsg: 'Transaction numbers are only allowed on a replica set member or mongos',
            code: 20,
            codeName: 'IllegalOperation'
          },
          ok: 0,
          code: 20,
          codeName: 'IllegalOperation'
        },
        context: { operationName: 'CreateReservation', attempt: 1 },
        timestamp: 2026-02-10T02:19:58.239Z,
        originalStack: 'MongoServerError: Transaction numbers are only allowed on a replica 
set member or mongos\n' +
          '    at Connection.sendCommand (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\n
ode_modules\\mongodb\\src\\cmap\\connection.ts:557:17)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Connection.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_
modules\\mongodb\\src\\cmap\\connection.ts:627:22)\n' +
          '    at Server.command (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modu
les\\mongodb\\src\\sdam\\server.ts:350:21)\n' +
          '    at tryOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_module
s\\mongodb\\src\\operations\\execute_operation.ts:293:24)\n' +
          '    at executeOperation (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mo
dules\\mongodb\\src\\operations\\execute_operation.ts:123:12)\n' +
          '    at Collection.insertOne (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\nod
e_modules\\mongodb\\src\\collection.ts:294:12)\n' +
          '    at model.$__save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modul
es\\mongoose\\lib\\model.js:398:16)\n' +
          '    at model.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\
\mongoose\\lib\\model.js:609:5)\n' +
          '    at C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_modules\\mongoose\\l
ib\\model.js:2722:9\n' +
          '    at async Promise.all (index 0)\n' +
          '    at Function.create (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\node_mod
ules\\mongoose\\lib\\model.js:2707:11)\n' +
          '    at MongoReservaRepository.save (C:\\Users\\Kristian\\Desktop\\barber-saas\\backe
nd\\src\\infrastructure\\database\\mongodb\\repositories\\MongoReservaRepository.js:15:16)\n' +
          '    at TransactionManager.executeInTransaction.operationName (C:\\Users\\Kristian\\D
esktop\\barber-saas\\backend\\src\\application\\use-cases\\reservas\\CreateReserva.js:72:42)\n'
 +
          '    at Function.executeInTransaction (C:\\Users\\Kristian\\Desktop\\barber-saas\\bac
kend\\src\\utils\\TransactionManager.js:57:32)\n' +
          '    at CreateReserva.execute (C:\\Users\\Kristian\\Desktop\\barber-saas\\backend\\sr
c\\application\\use-cases\\reservas\\CreateReserva.js:26:34)\n' +
          '    at Object.<anonymous>.exports.crearReservaBySlug (C:\\Users\\Kristian\\Desktop\\
barber-saas\\backend\\src\\controllers\\public.controller.js:140:25)'
      }

    [0m [90m 4 |[39m
     [90m 5 |[39m [36mconst[39m errorHandler [33m=[39m (err[33m,[39m req[33m,[39m 
res[33m,[39m next) [33m=>[39m {
    [31m[1m>[22m[39m[90m 6 |[39m   console[33m.[39merror([32m"ƒö┤ 
ERROR:"[39m[33m,[39m err)[33m;[39m
     [90m   |[39m           [31m[1m^[22m[39m
     [90m 7 |[39m
     [90m 8 |[39m   [90m// ­ƒöÑ A├æADIR HEADERS CORS SI NO EXISTEN[39m
     [90m 9 |[39m   [36mconst[39m origin [33m=[39m 
req[33m.[39mheaders[33m.[39morigin[33m;[39m[0m

      at error (src/config/middleware/errorHandler.js:6:11)
      at Layer.handleError (node_modules/router/lib/layer.js:116:17)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at next (node_modules/router/index.js:291:5)
      at Layer.handleError (node_modules/router/lib/layer.js:111:12)
      at trimPrefix (node_modules/router/index.js:340:13)
      at node_modules/router/index.js:297:9
      at processParams (node_modules/router/index.js:582:12)
      at Immediate.next (node_modules/router/index.js:291:5)
      at Immediate._onImmediate (node_modules/router/index.js:688:15)

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c40701e0/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c40701e0/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.log
      ƒôí [POST] /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar

      at log (src/app.js:98:11)

    console.warn
      ÔÜá´©Å  [Security] Rate limit exceeded {
        ip: '::ffff:127.0.0.1',
        method: 'POST',
        path: '/test-barberia/barberos/698a95ce49b93d39c4070200/reservar',
        max: 30
      }

    [0m [90m 38 |[39m [90m     */[39m
     [90m 39 |[39m     [36mstatic[39m warn(context[33m,[39m message[33m,[39m metadata 
[33m=[39m {}) {
    [31m[1m>[22m[39m[90m 40 |[39m         console[33m.[39mwarn([32m`ÔÜá´©Å  
[${context}] ${message}`[39m[33m,[39m metadata)[33m;[39m
     [90m    |[39m                 [31m[1m^[22m[39m
     [90m 41 |[39m     }
     [90m 42 |[39m
     [90m 43 |[39m     [90m/**[39m[0m

      at Function.warn (src/shared/Logger.js:40:17)
      at Object.warn [as handler] (src/middleware/rateLimit.middleware.js:18:20)
      at node_modules/express-rate-limit/dist/index.cjs:939:16
      at node_modules/express-rate-limit/dist/index.cjs:825:5

    console.warn
      ÔÜá´©Å MongoDB desconectado

    [0m [90m 89 |[39m   
mongoose[33m.[39mconnection[33m.[39mon([32m'disconnected'[39m[33m,[39m () [33m=>[39m 
{
     [90m 90 |[39m     isConnected [33m=[39m [36mfalse[39m[33m;[39m
    [31m[1m>[22m[39m[90m 91 |[39m     console[33m.[39mwarn([32m'ÔÜá´©Å MongoDB 
desconectado'[39m)[33m;[39m
     [90m    |[39m             [31m[1m^[22m[39m
     [90m 92 |[39m   })[33m;[39m
     [90m 93 |[39m
     [90m 94 |[39m   mongoose[33m.[39mconnection[33m.[39mon([32m'error'[39m[33m,[39m 
(err) [33m=>[39m {[0m

      at NativeConnection.warn (src/config/db.js:91:13)
      at NativeConnection.set (node_modules/mongoose/lib/connection.js:149:12)
      at NativeConnection.onClose (node_modules/mongoose/lib/connection.js:1319:19)
      at NativeConnection._close (node_modules/mongoose/lib/connection.js:1268:12)
      at closeDB (tests/setup.js:33:5)
      at Object.<anonymous> (tests/race-condition-stress.test.js:22:9)

  ÔùÅ ƒöÑ Race Condition Stress Tests ÔÇ║ Concurrencia Extrema ÔÇ║ 10 requests simult├íneos al 
mismo horario - solo 1 debe tener ├®xito

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.413 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.333 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.310 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.321 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.310 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.326 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.335 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.346 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.316 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.391 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.336 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.313 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.331 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.310 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.334 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.309 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.306 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.333 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.326 ms - 61[0m
[0mPOST /api/public/barberias/test-barberia/barberos/698a95ce49b93d39c4070200/reservar [33m429[0m 0.319 ms - 61[0m
    Received: 0

    [0m [90m 86 |[39m
     [90m 87 |[39m             [90m// Solo 1 debe tener ├®xito[39m
    [31m[1m>[22m[39m[90m 88 |[39m             
expect(successful[33m.[39mlength)[33m.[39mtoBe([35m1[39m)[33m;[39m
     [90m    |[39m                                       [31m[1m^[22m[39m
     [90m 89 |[39m             
expect(failed[33m.[39mlength)[33m.[39mtoBe([35m9[39m)[33m;[39m
     [90m 90 |[39m
     [90m 91 |[39m             [90m// Verificar en DB que solo hay 1 reserva[39m[0m

      at Object.toBe (tests/race-condition-stress.test.js:88:39)

  ÔùÅ ƒöÑ Race Condition Stress Tests ÔÇ║ Concurrencia Extrema ÔÇ║ 50 requests simult├íneos - 
solo 1 debe tener ├®xito

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 0

    [0m [90m 123 |[39m             )[33m;[39m
     [90m 124 |[39m
    [31m[1m>[22m[39m[90m 125 |[39m             
expect(successful[33m.[39mlength)[33m.[39mtoBe([35m1[39m)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 126 |[39m
     [90m 127 |[39m             [90m// Verificar en DB[39m
     [90m 128 |[39m             [36mconst[39m count [33m=[39m [36mawait[39m 
[33mReserva[39m[33m.[39mcountDocuments({[0m

      at Object.toBe (tests/race-condition-stress.test.js:125:39)

  ÔùÅ ƒöÑ Race Condition Stress Tests ÔÇ║ Performance bajo carga ÔÇ║ Maneja 20 reservas 
diferentes simult├íneas sin problemas

    expect(received).toBeGreaterThan(expected)

    Expected: > 15
    Received:   0

    [0m [90m 253 |[39m
     [90m 254 |[39m             [90m// Todas deber├¡an tener ├®xito (diferentes 
horarios)[39m
    [31m[1m>[22m[39m[90m 255 |[39m             
expect(successful[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m15[39m)[33m;[39m [90m// 
Al menos 75% de ├®xito[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 256 |[39m
     [90m 257 |[39m             [90m// Verificar que no hay duplicados[39m
     [90m 258 |[39m             [36mconst[39m reservas [33m=[39m [36mawait[39m 
[33mReserva[39m[33m.[39mfind({[0m

      at Object.toBeGreaterThan (tests/race-condition-stress.test.js:255:39)

Test Suites: 2 failed, 2 total
Tests:       9 failed, 13 passed, 22 total
Snapshots:   0 total
Time:        7.25 s
Ran all test suites matching /tests\\resenas.test.js|tests\\race-condition-stress.test.js/i.
